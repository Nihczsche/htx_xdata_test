# HTX xData Test

This repository is to host the solutions for the HTX xData technical test for the data scientist role. It comprises 3 sections, each placed in separate folders:

1. asr folder contains the solutions for Q2.  
2. asr-train folder contains the solutions for Q3. Working notebook for deriving Q4 report is stored here.  
3. hotword-detection folder contains the solutions for Q5.  

Dockerfile for Q2(e) is placed in the main repository.  
Solution for Q4 is placed in the main repository as training-report.pdf.  
Solution for Q6 is placed in the main repository as essay-ssl.pdf.  

# Question 1

.gitignore files and requirements.txt are placed in the main repository together with this README.md file. The requirements file lists all the packages used for the entire test.  

To install all dependencies, from the main directory, run the following command:  
```
pip install --upgrade -r requirements.txt
```

Note: If the installation fails during sentencepiece installation, ensure that the following packages are installed:
```
sudo apt-get install cmake build-essential pkg-config libgoogle-perftools-dev
```
See https://github.com/google/sentencepiece/issues/378 for more details.

# Question 2

Q2(a) to (c) solution is provided in asr/asr_api.py. To run the API web server, use the following steps:  

1. From the main directory, open a terminal and run the command:
```
uvicorn asr.asr_api:app --reload --host 0.0.0.0 --port 8001
```
2. In a browser, you may access http://localhost:8001/docs to view the relevant API documentation. You may also use the documentation to execute requests to the API.  

Q2(d) solution is generated by running the following command in the terminal from the main directory:  
```
python asr/cv-decode.py --directory <path to common_voice/cv-valid-dev/> --csv-input <path to common_voice/cv-valid-dev.csv> --csv-output asr/cv-valid-dev.csv  
```
The output csv is provided in asr/cv-valid-dev.csv

For Q2(e), from the parent directory, first build the docker image with the following command:
```
docker build . -t asr-api:v1
```
To start a container, use the following command:
```
docker run -p 8001:8001 --name <container name> -d asr-api:v1
```

# Question 3

Q3(a) and Q3(c) solution is provided in asr-train/cv-train-2a.ipynb. Modify the CV_DIRECTORY and REPO_NAME to the appropriate paths.  
  
For Q3(b), model is saved as wav2vec2-large-960h-cv. Due to its large size, it is not uploaded into the repository.  

# Question 4

Q4 solution is placed in the main repository as training-report.pdf. Working notebook for deriving Q4 report is stored in asr-train.  

# Question 5

Q5(a) solution is provided in hotword-detection/cv-hotword-5a.ipynb. The output text file is as shown in hotword-detection/detected.txt.  
  
Q5(b) solution is provided in hotword-detection/cv-hotword-similarity-5b.ipynb. The output csv file with the similarity boolean column is as shown in hotword-detection/cv-valid-dev.csv.  

# Question 6

Q6 solution is placed in the main repository as essay-ssl.pdf.
